@{
    Layout = "_PanelLayout";
}
@model List<ServiceCategories>

<h1 style="color:orange;font-weight: bold;">
    Add New Service
</h1>

<h2>Add Service list information</h2>


<form class="mt-3" id="addServiceForm">
    <div class="row">

        <div class="col-md-6">
            <div class="form-group position-relative error-l-50">
                <label>Service List Name</label>
                <input type="text" class="form-control" name="serviceName" required="" placeholder="Enter Your Service List Name">
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group position-relative error-l-50">
                <label>Service Description</label>
                <input type="text" class="form-control" name="serviceDescription" required="" placeholder="Enter a description for your service list (optional)">
            </div>
        </div>
        <div class="col-sm-6">
            <label>Service List</label>
            <select class="form-control select2-multiple" name="serviceItems" multiple="multiple" id="serviceList" data-width="100%">

                @foreach (var category in Model)
                {
                    <optgroup label="@category.ServiceCategoryName">
                        @foreach (var property in category.ServiceProperties)
                        {
                            <option value="@property.Id">@property.ServicePropertyName</option>
                        }
                    </optgroup>
                }
            </select>
        </div>

        <div class="col-md-12">
            <div class="text-right">
                <button class="btn btn-secondary" type="submit">
                    Add Service
                </button>
            </div>
        </div>
    </div>
</form>


@section pageJs{
    <script>
        $('#addServiceForm').on("submit", function (e) {
            e.preventDefault();
            var formData = $(this).serialize()
            $.ajax({
                url: '@Url.Action(nameof(Airport.UI.Controllers.ServiceController.AddService))',
                type: "POST",
                data: formData,
                success: function (response) {
                    if (response.result == 1) {
                        Swal.fire({
                            icon: 'success',
                            title: 'Success',
                            text: 'Successfully Added Service',
                        }).then(() => {
                            location.href = "/panel/service";
                        })
                    }
                }
            });
        })

        $('#serviceList').on("change", function () {
            var propId = $(this).val()
            $.ajax({
                url: '@Url.Action(nameof(Airport.UI.Controllers.ServiceController.GetServiceItem))',
                type: "POST",
                data: { serviceProId:propId },
                success: function (response) {
                    if(response.result==1){

                    }
                }
            });
        })
    </script>
}